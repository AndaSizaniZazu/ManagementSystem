@page "/addcourse"
@using Csla;
@using ManagementSystem.BusinessLogicLayer;
@using MudBlazor;
@inject IDataPortalFactory Factory

<PageTitle>Add a Course</PageTitle>

<MudText Typo="Typo.h6">Course Information</MudText>

<EditForm Model="@Course">
    <DataAnnotationsValidator/>
   <Csla.Blazor.CslaValidator/>
<MudForm>
        
    <MudGrid class="justify-space-between" >
            <MudItem sm="12" md="12">
                <MudTextField @bind-Value="Course.Name" Label="Name" Variant="Variant.Outlined" For="(() => Course.Name)" Immediate>Name</MudTextField>
            </MudItem>
            <MudItem sm="12" md="12">
        <MudTextField @bind-Value="Course.Description" Label="Description" Variant="Variant.Outlined" For="(() => Course.Description)" Immediate>Description</MudTextField>
            </MudItem>
            <MudItem sm="12" md="12">
        <MudTextField @bind-Value="Course.Code" Label="Code" Variant="Variant.Outlined" For="(() => Course.Code)" Immediate>Code</MudTextField>
            </MudItem>
            <MudItem sm="12" md="12">
        <MudTextField @bind-Value="Course.Credits" Label="Credits" Variant="Variant.Outlined" For="(() => Course.Credits)" Immediate>Credits</MudTextField>
        </MudItem>
            <MudItem sm="12" md="12">
                <MudTextField @bind-Value="Course.Department" Label="Department" Variant="Variant.Outlined" For="(() => Course.Department)" Immediate>Department</MudTextField>
            </MudItem>
        <MudCardActions>
            <MudButton Color="Color.Success" Variant="Variant.Filled" OnClick="Save" Disabled=@(!Course.IsValid)>Add Course</MudButton>
            </MudCardActions>
        </MudGrid>
</MudForm>
</EditForm>

@code {

    public CourseBL Course { get; set; }

    protected override  async Task OnInitializedAsync()
    {
        Course =  Factory.GetPortal<CourseBL>().Create();

    }

    public void Save()
    {
        Course = Course.Save();
    }
    
}
